@{
    Layout = "~/Views/Shared/_LayoutInterno.cshtml";
}

<div class="header pb-8">
    <div class="container-fluid">
        <div class="header-body">
            <div class="row">
                <div class="col-xl-3 col-lg-6">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">@ViewBag.EventoProximo.Fecha</h5> <!--  -->
                                    <span class="h2 font-weight-bold mb-0">@ViewBag.EventoProximo.Nombre</span><!--  -->
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                                        <i class="fas fa-chart-bar"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-muted text-sm">
                                <span class="text-success mr-2">0 /</span><!--  -->
                                <span class="text-nowrap">@ViewBag.EventoProximo.CantidadComensales</span><!--  -->
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">New users</h5><!-- -->
                                    <span class="h2 font-weight-bold mb-0">2,356</span><!--  -->
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-muted text-sm">
                                <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span><!--  -->
                                <span class="text-nowrap">Since last week</span><!--  -->
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Sales</h5><!--  -->
                                    <span class="h2 font-weight-bold mb-0">924</span><!--  -->
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                                        <i class="fas fa-users"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-muted text-sm">
                                <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span><!--  -->
                                <span class="text-nowrap">Since yesterday</span><!--  -->
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card card-stats mb-4 mb-xl-0">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h5 class="card-title text-uppercase text-muted mb-0">Performance</h5><!--  -->
                                    <span class="h2 font-weight-bold mb-0">49,65%</span><!--  -->
                                </div>
                                <div class="col-auto">
                                    <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                                        <i class="fas fa-percent"></i>
                                    </div>
                                </div>
                            </div>
                            <p class="mt-3 mb-0 text-muted text-sm">
                                <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span><!--  -->
                                <span class="text-nowrap">Since last month</span><!--  -->
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid mt--7">
    <div class="row">
        <div class="col">
            <div class="card shadow">
                <div class="card-header border-0">
                    <h3 class="mb-0">Card tables</h3>
                </div>
                <div class="table-responsive">
                    <table class="table align-items-center table-flush">
                        <thead class="thead-light">
                            <tr>
                                <th scope="col">Nombre</th>
                                <th scope="col">Fecha</th>
                                <th scope="col">Cantidad Comensales</th>
                                <th scope="col">Ubicacion</th>
                                <th scope="col">Foto</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Estado</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var evento in ViewBag.Eventos)
                            {
                                <tr>
                                    <th scope="row">
                                        @evento.Nombre
                                    </th>
                                    <td>
                                        @evento.Fecha
                                    </td>
                                    <td>
                                        @foreach (var reserva in ViewBag.Reservas)
                                        {
                                            if (evento.IdEvento == reserva.IdEvento)
                                            {
                                                ViewBag.Cont = ViewBag.Cont + reserva.CantidadComensales;
                                            }
                                        }
                                        @ViewBag.Cont /@evento.CantidadComensales

                                    </td>
                                    <td>
                                        @evento.Ubicacion
                                    </td>
                                    <td>
                                        @evento.Foto
                                    </td>
                                    <td>
                                        $ @evento.Precio
                                    </td>
                                    <td>
                                        @switch (@evento.Estado)
                                        {
                                            case 1:<span>Pendiente</span>
                                                break;
                                            case 2:<span>Cancelado</span>
                                                break;
                                            case 3:<span>Finalizado</span>
                                                break;
                                        }
                                    </td>
                                    <td class="text-right">
                                        <div class="dropdown">
                                            <a class="btn btn-sm btn-icon-only text-light" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                                <a class="dropdown-item" href="#">Cancelar Evento</a>
                                            </div>
                                        </div>
                                    </td>
                                @{ViewBag.Cont = 0;}
                                </tr>
                             }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <div class="row mt-5">
        <div class="col">
            <div class="card bg-default shadow">
                <div class="card-header bg-transparent border-0">
                    <h3 class="text-white mb-0">Card tables</h3>
                </div>
                <div class="table-responsive">
                    <table class="table align-items-center table-dark table-flush">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Nombre</th>
                                <th scope="col">TiempoCoccion</th>
                                <th scope="col">Descripcion</th>
                                <th scope="col">Ingredientes</th>
                                <th scope="col">Tipo de Receta</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var receta in ViewBag.Recetas)
                            {
                                <tr>
                                    <th scope="row">
                                        @receta.Nombre
                                    </th>
                                    <td>
                                        @receta.TiempoCoccion Minutos
                                    </td>
                                    <td>
                                        @receta.Descripcion
                                    </td>
                                    <td>
                                        @receta.Ingredientes
                                    </td>
                                    <td>
                                        @receta.IdTipoRecetaNavigation.Nombre
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<span>Recetas Cargadas en la pagina</span>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Nombre</th>
            <th scope="col">TiempoCoccion</th>
            <th scope="col">Descripcion</th>
            <th scope="col">Ingredientes</th>
            <th scope="col">Ingredientes</th>
            <th scope="col">Ingredientes</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var reserva in ViewBag.Reservas)
        {
        <tr>
            <td>@reserva.IdReserva</td>
            <td>@reserva.IdEvento</td>
            <td>@reserva.IdComensal</td>
            <td>@reserva.IdReceta</td>
            <td>@reserva.CantidadComensales</td>
            <td>@reserva.FechaCreacion</td>
        </tr>
        }
    </tbody>
</table>